% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/estimate_subgroup_effects.R
\name{estimate_subgroup_effects}
\alias{estimate_subgroup_effects}
\title{Estimate Marginal Subgroup Treatment Effects}
\usage{
estimate_subgroup_effects(
  brms_fit,
  trt_var = NULL,
  data = NULL,
  subgroup_vars = "auto",
  response_type = NULL,
  ndraws = NULL
)
}
\arguments{
\item{brms_fit}{A \code{brmsfit} object. Fitted model object from \code{fit_brms_model()} or
\code{run_brms_analysis()}. Must contain the necessary attributes for extracting treatment
variable and response type information.}

\item{trt_var}{A character string or \code{NULL}. Treatment variable name. If \code{NULL}, automatically
extracted from model attributes (set by \code{fit_brms_model()}). Must be a binary variable
coded as 0/1 in the dataset.}

\item{data}{A data frame or \code{NULL}. Dataset used for model fitting. If \code{NULL}, automatically
extracted from model attributes (set by \code{fit_brms_model()}). This dataset is used for
generating counterfactual predictions.}

\item{subgroup_vars}{A character vector or \code{"auto"}. Subgroup variable names for which
to estimate treatment effects. If \code{"auto"} (default), automatically detects treatment
interaction terms (colon syntax) and random effect grouping factors (pipe syntax) from
all formula components (\code{unshrunktermeffect}, \code{shprogeffect}, \code{shpredeffect}).}

\item{response_type}{A character string or \code{NULL}. Outcome type, one of \code{"binary"},
\code{"count"}, \code{"continuous"}, or \code{"survival"}. If \code{NULL}, automatically extracted from
model attributes (set by \code{fit_brms_model()}). This determines the appropriate scale
for effect estimation.}

\item{ndraws}{An integer or \code{NULL}. Number of posterior draws to use for estimation.
If \code{NULL} (default), all available posterior draws are used. Reducing this can speed
up computation at the cost of precision.}
}
\value{
\code{list} with two named elements:
\describe{
\item{\code{estimates}}{\code{tibble} where each row represents a subgroup (or "Overall" effect),
with columns for \code{Subgroup}, \code{Median}, \code{CI_Lower}, and \code{CI_Upper} from posterior distribution}
\item{\code{draws}}{\code{data.frame} containing posterior draws for each subgroup}
}
}
\description{
The function uses a counterfactual, marginal approach based on the posterior
predictive distribution. It averages over all other covariates to provide
robust estimates of subgroup-specific effects.
}
\details{
This post-processing function estimates marginal treatment effects for
specified subgroups from a fitted \code{brmsfit} object.
}
