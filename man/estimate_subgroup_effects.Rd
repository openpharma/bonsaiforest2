% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/estimate_subgroup_effects.R
\name{estimate_subgroup_effects}
\alias{estimate_subgroup_effects}
\title{Estimate Marginal Subgroup Treatment Effects}
\usage{
estimate_subgroup_effects(
  brms_fit,
  trt_var = NULL,
  data = NULL,
  subgroup_vars = "auto",
  response_type = NULL,
  ndraws = NULL
)
}
\arguments{
\item{brms_fit}{`brmsfit`. Fitted model object from `fit_brms_model()` or `run_brms_analysis()`.}

\item{trt_var}{`character(1)` or `NULL`. Treatment variable name. If `NULL`, extracted from
model attributes (set by `fit_brms_model()`).}

\item{data}{`data.frame` or `NULL`. Dataset used for model fitting. If `NULL`, extracted from
model attributes (set by `fit_brms_model()`).}

\item{subgroup_vars}{`character` or `"auto"`. Subgroup variable names. If `"auto"`, automatically
detects treatment interaction terms (colon syntax) and random effect grouping factors (pipe syntax)
from all formula components.}

\item{response_type}{`character(1)` or `NULL`. Outcome type: `"binary"`, `"count"`, `"continuous"`,
or `"survival"`. If `NULL`, extracted from model attributes (set by `fit_brms_model()`).}

\item{ndraws}{`integer(1)` or `NULL`. Number of posterior draws to use. If `NULL` (default),
all available draws are used.}
}
\value{
`list` with two named elements:
  \describe{
    \item{`estimates`}{`tibble` where each row represents a subgroup (or "Overall" effect),
      with columns for `Subgroup`, `Median`, `CI_Lower`, and `CI_Upper` from posterior distribution}
    \item{`draws`}{`data.frame` containing posterior draws for each subgroup}
  }
}
\description{
The function uses a counterfactual, marginal approach based on the posterior
predictive distribution. It averages over all other covariates to provide
robust estimates of subgroup-specific effects.
}
\details{
This post-processing function estimates marginal treatment effects for
specified subgroups from a fitted `brmsfit` object.
}
